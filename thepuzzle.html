<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Puzzles</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Permanent+Marker&family=Bangers&family=Press+Start+2P&family=Merriweather&family=Montserrat&family=Roboto+Mono&family=Playfair+Display&family=Dancing+Script&family=Oswald&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3b82f6; /* Blue-500 */
        }
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        
        /* Estilos generales para el documento de impresión */
        @media print {
            body > * { display: none !important; }
            .print-area {
                display: block !important;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
            }
            .print-page {
                height: 297mm; /* A4 height */
                width: 210mm;  /* A4 width */
                margin: 0;
                padding: 1cm 1.5cm;
                box-sizing: border-box;
                page-break-after: always;
                position: relative;
                color: #000;
                background-color: #fff;
            }
            .print-page:last-child {
                page-break-after: avoid;
            }
            .page-footer {
                position: absolute;
                bottom: 1cm;
                width: calc(100% - 3cm);
                text-align: center;
                font-size: 10pt;
            }
            /* Reset de estilos para impresión */
            h1, h2, h3, p { margin: 0; padding: 0; }
            .tailwind-reset * { all: unset; box-sizing: border-box; }
            .tailwind-reset { all: initial; }
            .print-page * { font-family: 'Times New Roman', serif !important; }
            
            /* SUDOKU Grid Styling */
            .sudoku-grid {
                display: grid;
                gap: 10px;
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            .sudoku-box {
                border: 1px solid #000;
                display: grid;
                grid-template-columns: repeat(9, 1fr);
                grid-template-rows: repeat(9, 1fr);
                width: 100%;
                aspect-ratio: 1 / 1;
            }
            /* ... add more specific print styles as needed ... */
        }

        /* Fuentes personalizadas para el selector de tipografías */
        .font-permanent-marker { font-family: 'Permanent Marker', cursive; }
        .font-bangers { font-family: 'Bangers', cursive; }
        .font-press-start-2p { font-family: 'Press Start 2P', cursive; }
        .font-merriweather { font-family: 'Merriweather', serif; }
        .font-montserrat { font-family: 'Montserrat', sans-serif; }
        .font-roboto-mono { font-family: 'Roboto Mono', monospace; }
        .font-playfair-display { font-family: 'Playfair Display', serif; }
        .font-dancing-script { font-family: 'Dancing Script', cursive; }
        .font-oswald { font-family: 'Oswald', sans-serif; }
        .font-inter { font-family: 'Inter', sans-serif; }

    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="max-w-6xl mx-auto">
        <h1 class="text-4xl font-extrabold text-center mb-6 text-blue-600">The Puzzles</h1>

        <!-- Controles Globales -->
        <div class="bg-white p-4 rounded-lg shadow-md mb-6 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4">
            <div class="flex items-center space-x-2">
                <input type="checkbox" id="includeInstructions" checked class="form-checkbox text-blue-600 h-4 w-4 rounded" onchange="state.config.includeInstructions = this.checked">
                <label for="includeInstructions" class="text-gray-700 select-none">Incluir Instrucciones (Página 1)</label>
            </div>
            <button onclick="generatePrint()" class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow-lg transition duration-300 transform hover:scale-[1.02]">
                PDF / Impresión
            </button>
        </div>

        <!-- Navegación por Pestañas -->
        <nav class="flex space-x-1 mb-6 overflow-x-auto pb-2" id="tabs">
            <!-- Las pestañas se renderizarán aquí -->
        </nav>

        <!-- Contenido de las Pestañas -->
        <div id="content" class="bg-white p-6 rounded-lg shadow-lg min-h-[500px]">
            <!-- El contenido de la configuración del puzzle activo se renderizará aquí -->
        </div>
    </div>

    <!-- Área de Impresión (Oculta por defecto) -->
    <div id="printArea" class="print-area hidden"></div>

    <script>
        // --- DATA STATE ---
        const PUZZLE_TYPES = [
            "Sudoku", "Sopa de Letras", "Criptograma", "Crucigrama",
            "Acróstico", "Autodefinidos", "Sopa de Números", "Timbiriche", "Ahorcado"
        ];
        
        const FONT_OPTIONS = [
            { name: "Inter (Por Defecto)", class: "font-inter" },
            { name: "Marcador", class: "font-permanent-marker" },
            { name: "Bangers", class: "font-bangers" },
            { name: "Pixel", class: "font-press-start-2p" },
            { name: "Serif", class: "font-merriweather" },
            { name: "Moderna", class: "font-montserrat" },
            { name: "Monoespacio", class: "font-roboto-mono" },
            { name: "Elegante", class: "font-playfair-display" },
            { name: "Escrito", class: "font-dancing-script" },
            { name: "Titular", class: "font-oswald" }
        ];

        const SUDOKU_CONFIG_OPTIONS = {
            '9x9': ["4 Fácil", "4 Medio", "4 Difícil", "4 Experto", "4 Imposible", "2 Fácil + 2 Medio", "2 Medio + 2 Difícil", "2 Difícil + 2 Experto", "2 Experto + 2 Imposible", "4 de Fácil a Experto", "4 cuadrículas en blanco"],
            '4x4': ["16 Fácil", "16 Medio", "8 Fácil + 8 Medio", "16 cuadrículas en blanco"],
            '6x6': ["9 Fácil", "9 Medio", "9 Difícil", "3 de cada nivel", "9 cuadrículas en blanco"]
        };

        let state = {
            activeTab: PUZZLE_TYPES[0],
            config: {
                includeInstructions: true,
                Sudoku: {
                    formato: '9x9',
                    dificultad: SUDOKU_CONFIG_OPTIONS['9x9'][0],
                    conSoluciones: false,
                    folio: { checked: false, numero: 1 }
                },
                "Sopa de Letras": {
                    titulo: "Mi Sopa de Letras",
                    tipografia: FONT_OPTIONS[0].class,
                    formato: 'Horizontal',
                    alineacion: 'derecha',
                    palabras: "gemini, google, codigo, javascript, tailwind, html, diseño, responsivo, nube, pasatiempo, pagina, web, editor, folio, imprimir",
                    imagenUrl: "",
                    folio: { checked: false, numero: 1 }
                },
                Criptograma: {
                    titulo: "Criptograma Secreto",
                    texto: "EL COCHE ROJO ESTA ESTACIONADO EN EL MUELLE. CLAVE: A=5",
                    pistas: "Clave inicial: A=5",
                    folio: { checked: false, numero: 1 }
                },
                Crucigrama: {
                    titulo: "Crucigrama Personalizado",
                    tipografia: FONT_OPTIONS[0].class,
                    palabras: [
                        { palabra: "FUEGO", definicion: "Elemento caliente y luminoso." },
                        { palabra: "AGUA", definicion: "Líquido vital para la vida." },
                        { palabra: "TIERRA", definicion: "El planeta en el que vivimos." },
                        { palabra: "AIRE", definicion: "Gas que respiramos." }
                    ],
                    folio: { checked: false, numero: 1 }
                },
                Acróstico: {
                    titulo: "Acróstico Creativo",
                    palabraVertical: "PUZZLE",
                    definiciones: [
                        "P: Piensa en grande.",
                        "U: Usa tu mente.",
                        "Z: Zumbido de ideas.",
                        "Z: Zen en la calma.",
                        "L: Logra tus metas.",
                        "E: Éxito asegurado."
                    ],
                    folio: { checked: false, numero: 1 }
                },
                Autodefinidos: {
                    titulo: "Autodefinidos Rápidos",
                    tipografia: FONT_OPTIONS[0].class,
                    cantidad: 10,
                    imagenUrl: "",
                    palabras: [
                        { palabra: "GATO", pista: "Animal doméstico felino." },
                        { palabra: "SOL", pista: "Estrella que da luz y calor." },
                        { palabra: "LUNA", pista: "Satélite natural de la Tierra." },
                        { palabra: "LIBRO", pista: "Objeto de papel para leer." }
                    ], // Simplified structure
                    folio: { checked: false, numero: 1 }
                },
                "Sopa de Números": {
                    titulo: "Mi Sopa de Números",
                    tipografia: FONT_OPTIONS[0].class,
                    formato: 'Horizontal',
                    alineacion: 'derecha',
                    numeros: "1234, 5678, 9012, 3456, 7890, 1122, 3344, 5566, 7788, 9900, 1020, 3040, 5060, 7080, 9090",
                    imagenUrl: "",
                    folio: { checked: false, numero: 1 }
                },
                Timbiriche: {
                    tipografia: FONT_OPTIONS[0].class,
                    folio: { checked: false, numero: 1 }
                },
                Ahorcado: {
                    folio: { checked: false, numero: 1 }
                }
            }
        };

        // --- UI RENDER FUNCTIONS ---
        function changeTab(newTab) {
            state.activeTab = newTab;
            renderTabs();
            renderContent();
        }

        function renderTabs() {
            const tabsContainer = document.getElementById('tabs');
            tabsContainer.innerHTML = PUZZLE_TYPES.map(type => `
                <button 
                    onclick="changeTab('${type}')" 
                    class="py-2 px-4 rounded-t-lg font-semibold whitespace-nowrap transition duration-150 ${state.activeTab === type 
                        ? 'bg-white text-blue-600 border-b-4 border-blue-600 shadow-t' 
                        : 'text-gray-600 hover:text-blue-500 hover:bg-gray-50'
                    }"
                >
                    ${type}
                </button>
            `).join('');
        }

        function renderFolioControl(puzzleType) {
            const config = state.config[puzzleType];
            return `
                <div class="mt-4 p-4 border rounded-lg bg-gray-50">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="folioCheckbox" ${config.folio.checked ? 'checked' : ''} 
                            onchange="state.config['${puzzleType}'].folio.checked = this.checked; renderContent();"
                            class="form-checkbox text-blue-600 h-4 w-4 rounded">
                        <span class="font-medium text-gray-700 select-none">Folio (Numeración de página)</span>
                    </label>
                    ${config.folio.checked ? `
                        <div class="mt-2 pl-6">
                            <label for="folioNumero" class="block text-sm font-medium text-gray-600">Número de inicio:</label>
                            <input type="number" id="folioNumero" value="${config.folio.numero}" min="1"
                                onchange="state.config['${puzzleType}'].folio.numero = parseInt(this.value) || 1;"
                                class="mt-1 block w-24 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function renderFontSelector(puzzleType) {
            const config = state.config[puzzleType];
            const fontName = puzzleType === 'Timbiriche' ? 'tipografia' : 'tipografia';
            const currentFontClass = config[fontName];
            
            return `
                <div class="mt-4 p-4 border rounded-lg bg-gray-50">
                    <label for="${fontName}" class="block text-lg font-medium text-gray-700 mb-2">Tipografía para el Título</label>
                    <select id="${fontName}" 
                        onchange="state.config['${puzzleType}'].${fontName} = this.value; renderPreview('${fontName}', this.value)"
                        class="block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        ${FONT_OPTIONS.map(font => `<option value="${font.class}" ${font.class === currentFontClass ? 'selected' : ''}>${font.name}</option>`).join('')}
                    </select>
                    <p id="${fontName}Preview" class="mt-2 text-3xl transition-all duration-300" style="font-family: ${FONT_OPTIONS.find(f => f.class === currentFontClass).class};">
                        Vista Previa del Título
                    </p>
                </div>
            `;
        }
        
        function renderPreview(elementId, fontClass) {
            const previewElement = document.getElementById(elementId + 'Preview');
            if (previewElement) {
                previewElement.style.fontFamily = FONT_OPTIONS.find(f => f.class === fontClass).class;
            }
        }

        function renderContent() {
            const contentDiv = document.getElementById('content');
            const type = state.activeTab;
            let html = `<h2 class="text-3xl font-bold mb-6 text-gray-800">${type} - Configuración</h2>`;
            const config = state.config[type];

            switch (type) {
                case 'Sudoku':
                    html += `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Formato -->
                            <div class="p-4 border rounded-lg">
                                <label class="block text-lg font-medium text-gray-700 mb-2">1. Formato</label>
                                <select 
                                    onchange="state.config.Sudoku.formato = this.value; state.config.Sudoku.dificultad = SUDOKU_CONFIG_OPTIONS[this.value][0]; renderContent();"
                                    class="block w-full p-2 border border-gray-300 rounded-md">
                                    ${['9x9', '4x4', '6x6'].map(f => `<option value="${f}" ${config.formato === f ? 'selected' : ''}>Sudoku ${f}</option>`).join('')}
                                </select>
                            </div>
                            <!-- Dificultad/Cantidad -->
                            <div class="p-4 border rounded-lg">
                                <label class="block text-lg font-medium text-gray-700 mb-2">2. Dificultad / Cantidad</label>
                                <select 
                                    onchange="state.config.Sudoku.dificultad = this.value;"
                                    class="block w-full p-2 border border-gray-300 rounded-md">
                                    ${SUDOKU_CONFIG_OPTIONS[config.formato].map(d => `<option value="${d}" ${config.dificultad === d ? 'selected' : ''}>${d}</option>`).join('')}
                                </select>
                            </div>
                        </div>
                        <div class="mt-6">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800">Opciones Adicionales</h3>
                            <div class="flex items-center space-x-4">
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" id="sudokuSoluciones" ${config.conSoluciones ? 'checked' : ''} 
                                        onchange="state.config.Sudoku.conSoluciones = this.checked;"
                                        class="form-checkbox text-blue-600 h-5 w-5 rounded">
                                    <span class="text-gray-700 select-none">Con Soluciones (Página 3)</span>
                                </label>
                            </div>
                            ${renderFolioControl('Sudoku')}
                        </div>
                    `;
                    break;

                case 'Sopa de Letras':
                case 'Sopa de Números':
                    const isWordSearch = type === 'Sopa de Letras';
                    const dataKey = isWordSearch ? 'palabras' : 'numeros';
                    const labelText = isWordSearch ? 'Palabras (separadas por coma, 15 obligatorias)' : 'Números (separados por coma, 15 obligatorios)';

                    html += `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Título -->
                            <div class="p-4 border rounded-lg">
                                <label for="wsTitle" class="block text-lg font-medium text-gray-700 mb-2">Título</label>
                                <input type="text" id="wsTitle" value="${config.titulo}" 
                                    oninput="state.config['${type}'].titulo = this.value;"
                                    class="block w-full p-2 border border-gray-300 rounded-md">
                            </div>
                            <!-- Formato y Alineación -->
                            <div class="p-4 border rounded-lg">
                                <label class="block text-lg font-medium text-gray-700 mb-2">Formato y Alineación</label>
                                <div class="flex space-x-4">
                                    <select 
                                        onchange="state.config['${type}'].formato = this.value;"
                                        class="block w-1/2 p-2 border border-gray-300 rounded-md">
                                        ${['Horizontal', 'Vertical'].map(f => `<option value="${f}" ${config.formato === f ? 'selected' : ''}>${f}</option>`).join('')}
                                    </select>
                                    <select 
                                        onchange="state.config['${type}'].alineacion = this.value;"
                                        class="block w-1/2 p-2 border border-gray-300 rounded-md">
                                        ${['izquierda', 'derecha'].map(a => `<option value="${a}" ${config.alineacion === a ? 'selected' : ''}>Imagen a la ${a}</option>`).join('')}
                                    </select>
                                </div>
                            </div>
                        </div>
                        ${renderFontSelector(type)}
                        <!-- Palabras/Números -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <label for="wsWords" class="block text-lg font-medium text-gray-700 mb-2">${labelText}</label>
                            <textarea id="wsWords" rows="3" 
                                oninput="state.config['${type}'].${dataKey} = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md resize-none">${config[dataKey]}</textarea>
                                <p class="text-sm text-gray-500 mt-1">Acepta Ñ y acentos. Debes ingresar al menos 15 elementos para que el puzzle se genere correctamente.</p>
                        </div>
                        <!-- Imagen (Opcional) -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <label for="wsImage" class="block text-lg font-medium text-gray-700 mb-2">URL de Imagen (Opcional)</label>
                            <input type="text" id="wsImage" placeholder="https://placehold.co/100x100" value="${config.imagenUrl}" 
                                oninput="state.config['${type}'].imagenUrl = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md">
                            <p class="text-sm text-gray-500 mt-1">La imagen se escalará para ser pequeña, sin bordes ni sombras.</p>
                        </div>
                        ${renderFolioControl(type)}
                    `;
                    break;

                case 'Criptograma':
                    html += `
                        <!-- Título -->
                        <div class="p-4 border rounded-lg">
                            <label for="cTitle" class="block text-lg font-medium text-gray-700 mb-2">Título</label>
                            <input type="text" id="cTitle" value="${config.titulo}" 
                                oninput="state.config.Criptograma.titulo = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <!-- Texto Principal -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <label for="cText" class="block text-lg font-medium text-gray-700 mb-2">Texto Principal (secreto)</label>
                            <textarea id="cText" rows="4" 
                                oninput="state.config.Criptograma.texto = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md resize-none">${config.texto}</textarea>
                        </div>
                        <!-- Pistas -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <label for="cPistas" class="block text-lg font-medium text-gray-700 mb-2">Pistas</label>
                            <textarea id="cPistas" rows="2" 
                                oninput="state.config.Criptograma.pistas = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md resize-none">${config.pistas}</textarea>
                        </div>
                        ${renderFolioControl(type)}
                    `;
                    break;

                case 'Crucigrama':
                    html += `
                        <!-- Título -->
                        <div class="p-4 border rounded-lg">
                            <label for="crTitle" class="block text-lg font-medium text-gray-700 mb-2">Título</label>
                            <input type="text" id="crTitle" value="${config.titulo}" 
                                oninput="state.config.Crucigrama.titulo = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        ${renderFontSelector(type)}
                        <!-- Palabras y Definiciones -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <h3 class="text-xl font-semibold mb-3">Palabras y Definiciones (4 a 10)</h3>
                            <div id="crosswordWordsList" class="space-y-3">
                                ${config.palabras.map((item, index) => `
                                    <div class="flex space-x-2">
                                        <input type="text" placeholder="Palabra" value="${item.palabra}" 
                                            oninput="state.config.Crucigrama.palabras[${index}].palabra = this.value.toUpperCase();"
                                            class="w-1/3 p-2 border rounded-md" maxlength="15">
                                        <input type="text" placeholder="Definición" value="${item.definicion}" 
                                            oninput="state.config.Crucigrama.palabras[${index}].definicion = this.value;"
                                            class="w-2/3 p-2 border rounded-md">
                                        <button onclick="removeCrosswordWord(${index})" class="text-red-500 hover:text-red-700 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 100 2v6a1 1 0 100-2V8z" clip-rule="evenodd" /></svg></button>
                                    </div>
                                `).join('')}
                            </div>
                            <button onclick="addCrosswordWord()" class="mt-3 bg-green-500 hover:bg-green-600 text-white py-1 px-4 rounded-lg text-sm disabled:opacity-50" ${config.palabras.length >= 10 ? 'disabled' : ''}>
                                Agregar Palabra
                            </button>
                        </div>
                        ${renderFolioControl(type)}
                    `;
                    break;
                case 'Acróstico':
                    html += `
                        <!-- Título -->
                        <div class="p-4 border rounded-lg">
                            <label for="acroTitle" class="block text-lg font-medium text-gray-700 mb-2">Título</label>
                            <input type="text" id="acroTitle" value="${config.titulo}" 
                                oninput="state.config.Acróstico.titulo = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <!-- Palabra Vertical -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <label for="acroWord" class="block text-lg font-medium text-gray-700 mb-2">Palabra Vertical (máx 15 letras)</label>
                            <input type="text" id="acroWord" value="${config.palabraVertical}" maxlength="15"
                                oninput="updateAcrosticWord(this.value.toUpperCase())"
                                class="block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <!-- Definiciones / Líneas -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <h3 class="text-xl font-semibold mb-3">Líneas Horizontales</h3>
                            <div id="acrosticLines" class="space-y-3">
                                ${config.palabraVertical.split('').map((char, index) => `
                                    <div class="flex items-center space-x-2">
                                        <span class="text-2xl font-bold text-blue-600">${char}:</span>
                                        <input type="text" placeholder="Línea para la letra ${char}" value="${config.definiciones[index] || ''}" 
                                            oninput="state.config.Acróstico.definiciones[${index}] = this.value;"
                                            class="w-full p-2 border rounded-md">
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ${renderFolioControl(type)}
                    `;
                    break;
                case 'Autodefinidos':
                    html += `
                        <!-- Título -->
                        <div class="p-4 border rounded-lg">
                            <label for="autTitle" class="block text-lg font-medium text-gray-700 mb-2">Título</label>
                            <input type="text" id="autTitle" value="${config.titulo}" 
                                oninput="state.config.Autodefinidos.titulo = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        ${renderFontSelector(type)}
                        <!-- Cantidad -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <label for="autCant" class="block text-lg font-medium text-gray-700 mb-2">Cantidad de Autodefinidos (4 a 20)</label>
                            <input type="number" id="autCant" value="${config.cantidad}" min="4" max="20"
                                onchange="state.config.Autodefinidos.cantidad = parseInt(this.value) || 4;"
                                class="block w-24 p-2 border border-gray-300 rounded-md">
                        </div>
                        <!-- Imagen (Opcional) -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <label for="autImage" class="block text-lg font-medium text-gray-700 mb-2">URL de Imagen (Opcional)</label>
                            <input type="text" id="autImage" placeholder="https://placehold.co/100x100" value="${config.imagenUrl}" 
                                oninput="state.config.Autodefinidos.imagenUrl = this.value;"
                                class="block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <!-- Palabras/Pistas (Simplified Input) -->
                        <div class="mt-6 p-4 border rounded-lg">
                            <h3 class="text-xl font-semibold mb-3">Palabras y Pistas (para simplificar la generación)</h3>
                            <p class="text-sm text-gray-500 mb-3">Se usará un diseño de casillas para rellenar en la impresión.</p>
                            <div id="autodefinidosWordsList" class="space-y-3">
                                ${config.palabras.map((item, index) => `
                                    <div class="flex space-x-2">
                                        <input type="text" placeholder="Palabra" value="${item.palabra}" 
                                            oninput="state.config.Autodefinidos.palabras[${index}].palabra = this.value.toUpperCase();"
                                            class="w-1/3 p-2 border rounded-md" maxlength="20">
                                        <input type="text" placeholder="Pista" value="${item.pista}" 
                                            oninput="state.config.Autodefinidos.palabras[${index}].pista = this.value;"
                                            class="w-2/3 p-2 border rounded-md">
                                        <button onclick="removeAutodefinidoWord(${index})" class="text-red-500 hover:text-red-700 p-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 100 2v6a1 1 100-2V8z" clip-rule="evenodd" /></svg></button>
                                    </div>
                                `).join('')}
                            </div>
                            <button onclick="addAutodefinidoWord()" class="mt-3 bg-green-500 hover:bg-green-600 text-white py-1 px-4 rounded-lg text-sm disabled:opacity-50" ${config.palabras.length >= 20 ? 'disabled' : ''}>
                                Agregar Palabras/Pista
                            </button>
                        </div>
                        ${renderFolioControl(type)}
                    `;
                    break;
                case 'Timbiriche':
                    html += `
                        <div class="mt-6">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800">Opciones</h3>
                            ${renderFontSelector(type)}
                            ${renderFolioControl(type)}
                            <div class="mt-6 p-4 border rounded-lg bg-yellow-100 text-yellow-800">
                                <p class="font-medium">Nota: Las instrucciones para Timbiriche están incluidas por defecto en la Página 1.</p>
                            </div>
                        </div>
                    `;
                    break;
                case 'Ahorcado':
                    html += `
                        <div class="mt-6">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800">Opciones</h3>
                            ${renderFolioControl(type)}
                        </div>
                    `;
                    break;
            }

            contentDiv.innerHTML = html;

            // Fix for Acrostic definition array size on load
            if (type === 'Acróstico' && config.palabraVertical.length !== config.definiciones.length) {
                updateAcrosticWord(config.palabraVertical, false);
            }
        }

        // --- PUZZLE SPECIFIC HELPERS ---

        function addCrosswordWord() {
            if (state.config.Crucigrama.palabras.length < 10) {
                state.config.Crucigrama.palabras.push({ palabra: "", definicion: "" });
                renderContent();
            }
        }
        function removeCrosswordWord(index) {
            state.config.Crucigrama.palabras.splice(index, 1);
            renderContent();
        }

        function addAutodefinidoWord() {
            if (state.config.Autodefinidos.palabras.length < 20) {
                state.config.Autodefinidos.palabras.push({ palabra: "", pista: "" });
                renderContent();
            }
        }
        function removeAutodefinidoWord(index) {
            state.config.Autodefinidos.palabras.splice(index, 1);
            renderContent();
        }

        function updateAcrosticWord(newWord, shouldRender = true) {
            const word = newWord.replace(/[^A-ZÁÉÍÓÚÑ]/g, ''); // Limpiar a solo letras
            state.config.Acróstico.palabraVertical = word;
            
            // Ajustar el array de definiciones para que coincida con la longitud de la palabra
            const currentLength = state.config.Acróstico.definiciones.length;
            const newLength = word.length;

            if (newLength > currentLength) {
                for (let i = currentLength; i < newLength; i++) {
                    state.config.Acróstico.definiciones.push("");
                }
            } else if (newLength < currentLength) {
                state.config.Acróstico.definiciones.splice(newLength);
            }
            
            if (shouldRender) {
                renderContent();
            }
        }


        // --- PRINT GENERATION LOGIC ---

        function generatePrint() {
            const printArea = document.getElementById('printArea');
            const type = state.activeTab;
            const config = state.config[type];
            const includeInstructions = state.config.includeInstructions;
            const folioActive = config.folio.checked;
            let pageNum = folioActive ? (config.folio.numero > 0 ? config.folio.numero : 1) : 1;
            let totalHtml = '';

            const hasInstructions = includeInstructions || type === 'Timbiriche';
            const hasSolution = (type === 'Sudoku' && config.conSoluciones) || ['Sopa de Letras', 'Sopa de Números', 'Criptograma', 'Crucigrama', 'Acróstico', 'Autodefinidos'].includes(type);

            // 1. INSTRUCCIONES PAGE (Optional/Mandatory for Timbiriche)
            if (hasInstructions) {
                totalHtml += generateInstructionPage(type, folioActive ? pageNum++ : null);
            }

            // 2. PUZZLE PAGE
            totalHtml += generatePuzzlePage(type, config, folioActive ? pageNum++ : null, false);

            // 3. SOLUTION PAGE (If applicable)
            if (hasSolution && type !== 'Timbiriche' && type !== 'Ahorcado') {
                 // For complex puzzles, we generate a 'solution' structure, even if the generation is simplified.
                totalHtml += generatePuzzlePage(type, config, folioActive ? pageNum++ : null, true);
            }

            printArea.innerHTML = totalHtml;
            window.print();
        }

        function createPage(content, folioNum) {
            let folio = folioNum !== null ? `<div class="page-footer">${folioNum}</div>` : '';
            return `
                <div class="print-page tailwind-reset">
                    <div style="width: 100%; height: 100%;">
                        ${content}
                    </div>
                    ${folio}
                </div>
            `;
        }

        function generateInstructionPage(type, folioNum) {
            let content = `
                <h1 style="text-align: center; font-size: 20pt; margin-bottom: 20pt; font-weight: bold;">INSTRUCCIONES GENERALES</h1>
                <h2 style="font-size: 14pt; margin-bottom: 10pt; font-weight: bold;">${type}</h2>
                <div style="font-size: 10pt; line-height: 1.5;">
            `;

            switch (type) {
                case 'Sudoku':
                    content += `
                        <p><strong>Objetivo:</strong> Rellenar las celdas vacías con números del 1 al N (dependiendo del formato), de forma que cada columna, cada fila y cada subcuadrícula (caja) contenga todos los números del 1 al N sin repeticiones.</p>
                        <p><strong>Formatos:</strong> Sudoku 9x9 (Números del 1 al 9, cajas de 3x3), Sudoku 6x6 (Números del 1 al 6, cajas de 2x3 o 3x2), Sudoku 4x4 (Números del 1 al 4, cajas de 2x2).</p>
                    `;
                    break;
                case 'Sopa de Letras':
                case 'Sopa de Números':
                    content += `
                        <p><strong>Objetivo:</strong> Encontrar y encerrar en un círculo todas las palabras/números de la lista dentro de la cuadrícula.</p>
                        <p>Las palabras/números pueden estar ocultos en varias direcciones: horizontal (izquierda a derecha o derecha a izquierda), vertical (arriba a abajo o abajo a arriba) y diagonal (en cualquiera de las cuatro direcciones).</p>
                    `;
                    break;
                case 'Criptograma':
                    content += `
                        <p><strong>Objetivo:</strong> Descifrar el mensaje secreto. En un criptograma, cada letra del alfabeto está sustituida por otra letra o por un número.</p>
                        <p>Una letra o número de sustitución siempre representa la misma letra original a lo largo de todo el puzzle. Utiliza las pistas proporcionadas para comenzar el descifrado.</p>
                    `;
                    break;
                case 'Crucigrama':
                    content += `
                        <p><strong>Objetivo:</strong> Rellenar la cuadrícula con letras de las palabras, basándose en sus definiciones. Las palabras se cruzan entre sí.</p>
                        <p>Las definiciones se dividen en "Horizontales" y "Verticales" y se corresponden con el número de inicio en la cuadrícula.</p>
                    `;
                    break;
                case 'Acróstico':
                    content += `
                        <p><strong>Objetivo:</strong> Escribir una frase o poema donde la primera letra de cada línea, leída verticalmente, forma una palabra específica (el tema o palabra vertical).</p>
                        <p>Las líneas horizontales deben ser rellenadas o completadas basándose en el tema o las pistas.</p>
                    `;
                    break;
                case 'Autodefinidos':
                    content += `
                        <p><strong>Objetivo:</strong> Rellenar las casillas numeradas con una palabra por cada pista, de forma similar a un crucigrama pero con una disposición más compacta y regular, a menudo sin que las palabras se crucen directamente. Las pistas se presentan como definiciones cortas.</p>
                    `;
                    break;
                case 'Timbiriche':
                    content += `
                        <p><strong>Juego para dos o más jugadores.</strong></p>
                        <p><strong>Objetivo:</strong> Formar la mayor cantidad de cuadrados posibles.</p>
                        <p><strong>Cómo jugar:</strong> En cada turno, un jugador une dos puntos adyacentes (horizontal o verticalmente) con una línea. Si al trazar una línea se completa un cuadrado (la cuarta línea), el jugador anota ese cuadrado con su inicial y gana otro turno.</p>
                        <p>El juego termina cuando todos los puntos han sido unidos. Gana el jugador que haya anotado más cuadrados.</p>
                    `;
                    break;
                case 'Ahorcado':
                    content += `
                        <p><strong>Objetivo:</strong> Adivinar la palabra secreta. Se proporcionan espacios que representan las letras de la palabra.</p>
                        <p>El jugador propone letras una por una. Si la letra es correcta, se anota en todos los espacios que le correspondan. Si la letra es incorrecta, se dibuja una parte del "ahorcado". El juego termina si se adivina la palabra (gana el jugador) o si el dibujo del ahorcado se completa (gana el crupier).</p>
                    `;
                    break;
            }

            content += `</div>`;
            return createPage(content, folioNum);
        }

        function generatePuzzlePage(type, config, folioNum, isSolution) {
            let content = '';
            const titleClass = config.tipografia || 'font-inter'; // Default font for titles

            // Placeholder for common title
            if (config.titulo) {
                content += `<h1 style="text-align: center; font-size: 24pt; margin-bottom: 10pt; font-weight: bold; font-family: ${titleClass};">${config.titulo}</h1>`;
            }

            // General solution text for non-grid puzzles
            if (isSolution && type !== 'Sudoku') {
                content += `<p style="text-align: center; font-size: 16pt; margin-bottom: 20pt; color: #10b981;">--- PÁGINA DE SOLUCIÓN ---</p>`;
            }

            switch (type) {
                case 'Sudoku':
                    const [count, level] = config.dificultad.split(' ');
                    const numPuzzles = isNaN(parseInt(count)) ? 4 : parseInt(count);
                    const size = config.formato;
                    const gridCols = size === '9x9' ? 2 : 4;

                    content = `
                        <h1 style="text-align: center; font-size: 24pt; margin-bottom: 10pt; font-weight: bold;">SUDOKU ${size}</h1>
                        <p style="text-align: center; font-size: 10pt; margin-bottom: 15pt;">${isSolution ? 'SOLUCIONES' : config.dificultad}</p>
                        <div style="display: grid; grid-template-columns: repeat(${gridCols}, 1fr); gap: 10pt; height: 80vh;">
                    `;

                    for (let i = 0; i < numPuzzles; i++) {
                        // Simplified grid generation for printing
                        const cellCount = size === '9x9' ? 81 : (size === '6x6' ? 36 : 16);
                        let cells = '';
                        for (let j = 0; j < cellCount; j++) {
                            const number = isSolution ? (j % 9) + 1 : ''; // Simplified solved/unsolved
                            cells += `<div style="border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; font-size: ${size === '9x9' ? '8pt' : '10pt'}; font-weight: ${number ? 'bold' : 'normal'}; color: ${number ? '#000' : '#aaa'};">${number}</div>`;
                        }

                        content += `
                            <div style="border: 3px solid #000; display: grid; grid-template-columns: repeat(${size.charAt(0)}, 1fr); grid-template-rows: repeat(${size.charAt(0)}, 1fr); width: 100%; aspect-ratio: 1 / 1;">
                                ${cells}
                            </div>
                        `;
                    }
                    content += `</div>`;
                    break;
                
                case 'Sopa de Letras':
                case 'Sopa de Números':
                    const isWS = type === 'Sopa de Letras';
                    const listWords = (isWS ? config.palabras : config.numeros).split(',').map(w => w.trim().toUpperCase()).filter(w => w.length > 0);
                    const gridHeight = 13;
                    const gridWidth = 17;

                    let grid = '';
                    for(let i=0; i < gridHeight * gridWidth; i++) {
                        const char = isSolution ? (isWS ? 'X' : '9') : (isWS ? String.fromCharCode(65 + Math.floor(Math.random() * 26)) : Math.floor(Math.random() * 10).toString());
                        grid += `<div style="border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; font-size: 10pt; font-weight: bold; width: 100%; aspect-ratio: 1 / 1; ${isSolution ? 'color: #10b981;' : ''}">${char}</div>`;
                    }

                    const wordListHtml = `<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 5pt; font-size: 10pt; line-height: 1.5;">${listWords.map((word, i) => `
                        <div style="display: flex; align-items: center;">
                            <div style="width: 10pt; height: 10pt; border: 1px solid #ccc; box-shadow: 1px 1px 1px #eee; margin-right: 5pt; background-color: ${isSolution ? '#10b981' : '#fff'};"></div>
                            <span style="${isSolution ? 'text-decoration: line-through; color: #10b981;' : ''}">${word}</span>
                        </div>
                    `).join('')}</div>`;

                    const imageHtml = config.imagenUrl ? `<img src="${config.imagenUrl}" alt="Imagen decorativa" style="max-width: 100pt; max-height: 100pt; display: block; object-fit: contain; margin: 10pt auto 0 auto;">` : '';

                    if (config.formato === 'Horizontal') {
                        // Horizontal Layout: Title, Grid, List/Image (Centered)
                        content += `
                            <div style="text-align: center; margin-bottom: 10pt;">
                                ${config.titulo ? `<h1 style="font-size: 24pt; font-weight: bold; font-family: ${titleClass};">${config.titulo}</h1>` : ''}
                            </div>
                            <div style="display: flex; justify-content: center; margin-bottom: 20pt;">
                                <div style="display: grid; grid-template-columns: repeat(${gridWidth}, 1fr); width: ${gridWidth * 1.5}em; height: ${gridHeight * 1.5}em; max-width: 100%;">
                                    ${grid}
                                </div>
                            </div>
                            <div style="display: flex; justify-content: center; align-items: flex-start; margin-top: 20pt;">
                                <div style="width: 100%; max-width: 600pt; display: flex; align-items: flex-start; justify-content: ${config.alineacion === 'izquierda' ? 'flex-start' : 'flex-end'};">
                                    ${config.alineacion === 'izquierda' ? `${imageHtml}<div style="flex-grow: 1; margin-left: 15pt;">${wordListHtml}</div>` : `<div style="flex-grow: 1; margin-right: 15pt;">${wordListHtml}</div>${imageHtml}`}
                                </div>
                            </div>
                        `;
                    } else {
                         // Vertical Layout: Two Columns
                        content += `
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20pt; height: 90vh;">
                                <!-- Columna Izquierda (Título y Sopa) -->
                                <div style="display: flex; flex-direction: column; align-items: flex-start;">
                                    ${config.titulo ? `<h1 style="font-size: 20pt; font-weight: bold; font-family: ${titleClass}; text-align: left; margin-bottom: 10pt;">${config.titulo}</h1>` : ''}
                                    <div style="display: grid; grid-template-columns: repeat(${gridWidth}, 1fr); width: ${gridWidth * 1.2}em; height: ${gridHeight * 1.2}em; max-width: 100%; align-self: ${config.alineacion === 'izquierda' ? 'flex-start' : 'flex-end'};">
                                        ${grid}
                                    </div>
                                </div>
                                <!-- Columna Derecha (Lista e Imagen) -->
                                <div style="display: flex; flex-direction: column; align-items: center; justify-content: space-between;">
                                    <div style="width: 100%;">${wordListHtml}</div>
                                    <div style="margin-top: auto;">${imageHtml}</div>
                                </div>
                            </div>
                        `;
                    }
                    break;

                case 'Criptograma':
                    const originalText = config.texto.toUpperCase().split('');
                    const cipherText = originalText.map(char => {
                        if (char.match(/[A-ZÑ]/)) {
                            // Simplified substitution for printing structure
                            const code = char.charCodeAt(0);
                            const substitutedCode = ((code - 65 + 3) % 26) + 65; // Simple Caesar shift +3
                            return String.fromCharCode(substitutedCode);
                        }
                        return char;
                    }).join('');
                    
                    content += `
                        <h1 style="text-align: center; font-size: 24pt; margin-bottom: 10pt; font-weight: bold;">${config.titulo}</h1>
                        <h2 style="font-size: 14pt; margin-bottom: 10pt; font-weight: bold;">${isSolution ? 'SOLUCIÓN:' : 'TEXTO CIFRADO:'}</h2>
                        <div style="border: 1px solid #000; padding: 10pt; font-size: 12pt; margin-bottom: 20pt;">
                            ${isSolution ? config.texto : cipherText}
                        </div>
                        <h2 style="font-size: 14pt; margin-bottom: 10pt; font-weight: bold;">${isSolution ? 'ALFABETO DE SUSTITUCIÓN (SOLUCIÓN)' : 'RELLENAR AQUÍ:'}</h2>
                        <div style="display: grid; grid-template-columns: repeat(9, 1fr); gap: 5pt; font-size: 10pt;">
                            ${'ABCDEFGHIJKLMNÑOPQRSTUVWXYZ'.split('').map(letter => `
                                <div style="text-align: center; border: 1px solid #ccc; padding: 5pt;">
                                    <strong>${letter}</strong>
                                    <div style="height: 10pt; border-bottom: 1px solid #000; margin-top: 5pt;">${isSolution ? (letter === 'A' ? '5' : '') : ''}</div>
                                </div>
                            `).join('')}
                        </div>
                        <h2 style="font-size: 14pt; margin-top: 20pt; margin-bottom: 10pt; font-weight: bold;">PISTAS:</h2>
                        <div style="font-size: 10pt;">${config.pistas}</div>
                    `;
                    break;
                case 'Crucigrama':
                    // Simplified: just list words/definitions for printing structure
                    const words = config.palabras.filter(p => p.palabra.length > 0);
                    const numWords = words.length;

                    // Grid placeholder (must be filled in with a generator for a real puzzle)
                    let crosswordGrid = '';
                    for(let i=0; i < 15 * 15; i++) {
                        crosswordGrid += `<div style="border: 1px solid #000; width: 100%; aspect-ratio: 1 / 1; display: flex; align-items: center; justify-content: center; font-size: 8pt; background-color: ${i % 3 === 0 ? '#000' : '#fff'}; color: ${isSolution ? '#10b981' : '#000'};">${isSolution && i % 3 !== 0 ? 'X' : ''}</div>`;
                    }
                    
                    content += `
                        <h1 style="text-align: center; font-size: 24pt; margin-bottom: 10pt; font-weight: bold; font-family: ${titleClass};">${config.titulo}</h1>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20pt; height: 80vh;">
                            <!-- Cuadrícula (Simplificada) -->
                            <div style="display: grid; grid-template-columns: repeat(15, 1fr); width: 100%; aspect-ratio: 1 / 1; max-width: 400pt; margin: 0 auto; border: 2px solid #000;">
                                ${crosswordGrid}
                            </div>
                            <!-- Definiciones -->
                            <div>
                                <h2 style="font-size: 14pt; margin-bottom: 5pt; font-weight: bold;">DEFINICIONES:</h2>
                                <h3 style="font-size: 12pt; margin-bottom: 5pt; font-weight: bold;">HORIZONTALES</h3>
                                <div style="font-size: 10pt; line-height: 1.5;">
                                    ${words.map((item, i) => `
                                        <p><strong>${i + 1}.</strong> ${item.definicion} ${isSolution ? `(${item.palabra})` : ''}</p>
                                    `).join('')}
                                </div>
                                <h3 style="font-size: 12pt; margin-top: 10pt; margin-bottom: 5pt; font-weight: bold;">VERTICALES</h3>
                                <div style="font-size: 10pt; line-height: 1.5;">
                                    <p><strong>${numWords + 1}.</strong> Definición de palabra vertical (ejemplo) ${isSolution ? `(PALABRA)` : ''}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'Acróstico':
                    const acroWord = config.palabraVertical;
                    const acroLines = config.definiciones;

                    content += `
                        <h1 style="text-align: center; font-size: 24pt; margin-bottom: 20pt; font-weight: bold;">${config.titulo}</h1>
                        <div style="max-width: 500pt; margin: 0 auto; font-size: 12pt;">
                            ${acroWord.split('').map((char, index) => {
                                const lineContent = acroLines[index] || '';
                                return `
                                    <div style="display: flex; align-items: center; margin-bottom: 10pt;">
                                        <strong style="font-size: 18pt; margin-right: 10pt; color: #3b82f6;">${char}:</strong>
                                        <span style="flex-grow: 1; border-bottom: 1px solid #000; padding-bottom: 2pt;">
                                            ${isSolution ? `<span style="color: #10b981;">${lineContent}</span>` : ''}
                                        </span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    `;
                    break;

                case 'Autodefinidos':
                    const autodefinidos = config.palabras.slice(0, config.cantidad);
                    
                    content += `
                        <h1 style="text-align: center; font-size: 24pt; margin-bottom: 10pt; font-weight: bold; font-family: ${titleClass};">${config.titulo}</h1>
                        ${config.imagenUrl ? `<img src="${config.imagenUrl}" alt="Imagen decorativa" style="max-width: 100pt; max-height: 100pt; display: block; object-fit: contain; margin: 10pt auto 20pt auto;">` : ''}
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20pt;">
                            <!-- Pistas -->
                            <div>
                                <h2 style="font-size: 14pt; margin-bottom: 10pt; font-weight: bold;">DEFINICIONES:</h2>
                                <div style="font-size: 10pt; line-height: 1.5;">
                                    ${autodefinidos.map((item, i) => `
                                        <p><strong>${i + 1}.</strong> ${item.pista} ${isSolution ? `(${item.palabra})` : ''}</p>
                                    `).join('')}
                                </div>
                            </div>
                            <!-- Casillas para Rellenar (Simplified) -->
                            <div>
                                <h2 style="font-size: 14pt; margin-bottom: 10pt; font-weight: bold;">CASILLAS:</h2>
                                <div style="font-size: 10pt; line-height: 1.5; display: flex; flex-direction: column; gap: 10pt;">
                                    ${autodefinidos.map((item, i) => `
                                        <div style="display: flex; align-items: center;">
                                            <strong style="margin-right: 5pt;">${i + 1}.</strong>
                                            <div style="display: flex;">
                                                ${item.palabra.split('').map(letter => `
                                                    <div style="width: 12pt; height: 12pt; border: 1px solid #000; margin-right: 1px; display: flex; justify-content: center; align-items: center; font-size: 8pt; font-weight: bold; background-color: #fff;">
                                                        ${isSolution ? `<span style="color: #10b981;">${letter}</span>` : ''}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'Timbiriche':
                    content += `
                        <h1 style="text-align: center; font-size: 40pt; margin-bottom: 20pt; font-weight: bold; font-family: ${config.tipografia};">TIMBIRICHE</h1>
                        <div style="display: flex; justify-content: center; align-items: center; height: 70vh;">
                            <div style="border: 2px solid #000; padding: 15pt; background-color: #f7fafc;">
                                <div style="display: grid; grid-template-columns: repeat(10, 1fr); grid-template-rows: repeat(10, 1fr); gap: 15pt;">
                                    ${Array(100).fill().map(() => `<div style="width: 5pt; height: 5pt; background-color: #000; border-radius: 50%;"></div>`).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'Ahorcado':
                    content += `
                        <h1 style="text-align: center; font-size: 24pt; margin-bottom: 20pt; font-weight: bold;">AHORCADO (HANGMAN)</h1>
                        <div style="display: flex; flex-direction: column; align-items: center; height: 80vh;">
                            <!-- Diseño del Ahorcado (Simplified SVG for printing) -->
                            <svg width="150" height="200" viewBox="0 0 150 200" style="margin-bottom: 20pt;">
                                <line x1="10" y1="190" x2="140" y2="190" stroke="black" stroke-width="4"/> <!-- Base -->
                                <line x1="30" y1="190" x2="30" y2="10" stroke="black" stroke-width="4"/> <!-- Vertical -->
                                <line x1="30" y1="10" x2="100" y2="10" stroke="black" stroke-width="4"/> <!-- Horizontal -->
                                <line x1="100" y1="10" x2="100" y2="30" stroke="black" stroke-width="4"/> <!-- Soga -->
                                <!-- Espacio para las partes del cuerpo -->
                            </svg>

                            <!-- Abecedario en Cuadrícula -->
                            <div style="display: grid; grid-template-columns: repeat(9, 1fr); gap: 5pt; font-size: 12pt; max-width: 400pt; margin-bottom: 30pt;">
                                ${'ABCDEFGHIJKLMNÑOPQRSTUVWXYZ'.split('').map(letter => `
                                    <div style="border: 1px solid #000; width: 100%; aspect-ratio: 1 / 1; display: flex; align-items: center; justify-content: center; font-weight: bold;">${letter}</div>
                                `).join('')}
                            </div>

                            <!-- Línea para la Palabra -->
                            <div style="width: 80%; border-bottom: 3px solid #000; padding-bottom: 5pt;"></div>
                        </div>
                    `;
                    break;
            }

            return createPage(content, folioNum);
        }

        // --- INITIALIZATION ---
        window.onload = () => {
            renderTabs();
            renderContent();
        };
    </script>
</body>
</html>